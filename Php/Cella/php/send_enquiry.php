<?phpdate_default_timezone_set('Etc/UTC');require '../php/PHPMailer-master/PHPMailerAutoload.php';		if($_POST)	{		 		$subject=$_POST["subject"]; 		$contact_email=$_POST["email"];  		$message=$_POST["message"];  		$contact_person=$_POST["name"];			} 		$email_length =strlen($contact_email); 		if($email_length !=0)	{				if(check_email_address($contact_email))			{								$domain_link = "$_SERVER[HTTP_HOST]";				$subject = "Enquiry from ".$contact_person ;				$body = "E-mail from: <b>".$contact_person."</b><br><br>";				$body .= "E-mail Id: <b>".$contact_email."</b><br><br>";				$body .= "Message: ".$message."<br>";				$body .= "<a href='http://www.mindnotion.com/project.htm'><img src='http://www.mindnotion.com/images/big_logo.png' height='42' width='42' >Cella Free E-Commerce Solution. Download now!</a>";										$mail = new PHPMailer;				//Tell PHPMailer to use SMTP				$mail->isSMTP();				//Enable SMTP debugging				// 0 = off (for production use)				// 1 = client messages				// 2 = client and server messages				$mail->SMTPDebug = 0;				//Ask for HTML-friendly debug output				$mail->Debugoutput = 'html';				//Set the hostname of the mail server				$mail->Host = 'smtp.gmail.com';				//Set the SMTP port number - 587 for authenticated TLS, a.k.a. RFC4409 SMTP submission				$mail->Port = 587;				//Set the encryption system to use - ssl (deprecated) or tls				$mail->SMTPSecure = 'tls';				//Whether to use SMTP authentication				$mail->SMTPAuth = true;				//Username to use for SMTP authentication - use full email address for gmail				$mail->Username = "XXXXX@gmail.com";//change your XXXXX.com by your e-commerce name				//Password to use for SMTP authentication				$mail->Password = "your gmail password"; //replace this by your gmail password				//Set who the message is to be sent from				$mail->setFrom('XXXXX@gmail.com', $domain_link);//change your XXXXX.com by your e-commerce name				//Set an alternative reply-to address				$mail->addReplyTo('XXXXX@gmail.com', $domain_link);//change your XXXXX.com by your e-commerce name				//Set who the message is to be sent to				$mail->addAddress('XXXXX@gmail.com', $domain_link);//change your XXXXX.com by your e-commerce name				//Set the subject line				$mail->Subject = $subject;				$mail->Body =$body;				//Replace the plain text body with one created manually				$mail->AltBody = 'Message for Comapny name';//change your XXXXX.com by your e-commerce name										 				if (!$mail->send()) 				{							echo "<script>alert('error".$mail->ErrorInfo."');window.location ='../contactus.php'</script>";				} 				else 				{					echo "<script>alert('Thanks for contacting us. We will revert back asap.');window.location ='../contactus.php'</script>";				}											}			else			{								echo "<script>alert('Invalid E-mail Id.');window.location ='../contactus.php'</script>";			}				}			function check_email_address($email) 	{  // First, we check that there's one @ symbol,   // and that the lengths are right.  if (!preg_match("/^[^@]{1,64}@[^@]{1,255}$/", $email))   {    // Email invalid because wrong number of characters     // in one section or wrong number of @ symbols.    return false;  }  // Split it into sections to make life easier  $email_array = explode("@", $email);  $local_array = explode(".", $email_array[0]);  for ($i = 0; $i < sizeof($local_array); $i++)   {    if(!preg_match("/^(([A-Za-z0-9!#$%&'*+\/=?^_`{|}~-][A-Za-z0-9!#$%&?'*+\/=?^_`{|}~\.-]{0,63})|(\"[^(\\|\")]{0,62}\"))$/",$local_array[$i])) 	{      return false;    }  }  // Check if domain is IP. If not,   // it should be valid domain name  if (!preg_match("/^\[?[0-9\.]+\]?$/", $email_array[1]))   {	    $domain_array = explode(".", $email_array[1]);	    if (sizeof($domain_array) < 2) 		{	        return false; // Not enough parts to domain	    }	    for ($i = 0; $i < sizeof($domain_array); $i++) 		{		      if(!preg_match("/^(([A-Za-z0-9][A-Za-z0-9-]{0,61}[A-Za-z0-9])|?([A-Za-z0-9]+))$/",$domain_array[$i])) 			{		        return false;		      }	    }  }  return true;}?> 